---
layout: post
title: "Ant EchoPath Task"
date: 2008-10-08
tags: ["software development"]
comments: false
---
{% include JB/setup %}

<div class='post'>
A few days ago, my pair and I have spent some time burning in <a href="http://en.wikipedia.org/wiki/JAR_hell#JAR_hell">JAR Hell</a>. As we tried to find out what was going on, we were reminded how cumbersome it is to get a classpath representation out of <a href="http://ant.apache.org/">Ant</a>. Fortunately, I don't have these kind of problems very often. Yet every time I do have them, I end up spending some time to figure out, how to get <a href="http://ant.apache.org/">Ant</a> to tell me what's on the classpath I'm using. Although there are a few blog posts that describe <a href="http://blog.philhersh.com/weblog/2005/10/caffeine_induce.html">how to do that</a> or even <a href="http://peeps.dallas.focus-technologies.com/roller/page/lhankins?entry=more_readable_classpaths_for_ant">how to make the output actually readable</a> I found it just too painful to go through the entire cycle from scratch each time.<br /><br />As a result, I hacked together an <a href="http://ant.apache.org/">Ant</a> task, which will tell you exactly what your path looks like.<br /><br />In your build file, just define a new <span style="font-family:courier new;">echo-path</span> task and then assign the path id you're puzzled about to the <span style="font-family:courier new;">pathref</span> attribute. For example:<br /><pre class="brush: xml; gutter: false;"><br />&lt;project name="echo-path" default="show-my-class-path"&gt;<br />&lt;target name="show-my-class-path"&gt;<br />  &lt;path id="my.class.path"&gt;<br />      &lt;fileset dir="lib" includes="**/*.jar"/&gt;<br />  &lt;/path&gt;<br /><br />  &lt;taskdef name="echo-path" classname="net.sf.orcus.EchoPathTask"<br />           classpath="/home/patric/lib/echo-path-0.1.jar" /&gt;<br />  &lt;echo-path pathref="my.class.path"/&gt;<br />&lt;/target&gt;<br />&lt;/project&gt;<br /></pre><br /><br />This will output something along the following lines:<br /><pre class="brush: plain; gutter: false;"><br />show-my-class-path:<br />[echo-path] Actual path for 'my.class.path':<br />[echo-path] /home/patric/workspace/toy/lib/gwt-benchmark-viewer.jar<br />[echo-path] /home/patric/workspace/toy/lib/gwt-dev-linux.jar<br />[echo-path] /home/patric/workspace/toy/lib/gwt-servlet.jar<br />[echo-path] /home/patric/workspace/toy/lib/gwt-user.jar<br /></pre><br />The JAR containing the task can be <a href="https://sourceforge.net/project/showfiles.php?group_id=139607&amp;package_id=153101&amp;release_id=631706">downloaded here</a>.<br /><br /><span style="font-weight: bold;">Update:</span> In order to define the task, <a href="https://sourceforge.net/project/showfiles.php?group_id=139607&amp;package_id=153101&amp;release_id=631706">echo-path-0.1.jar</a> must be available. You can either place it anywhere on your file system and reference it using tha <span style="font-family: courier new;">classpath</span> attribute like in the example above. Alternatively, if you don't want to specify the JAR location each time, just put  <a href="https://sourceforge.net/project/showfiles.php?group_id=139607&amp;package_id=153101&amp;release_id=631706">echo-path-0.1.jar</a> in your <span style="font-family:courier new;">ANT_HOME/lib</span> directory
</div>
